<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="./config.js"></script>
    <script src="https://cdn.ronghub.com/RongIMLib-2.9.latest.js"></script>
</head>

<body>
    <script>
        // const appkey = "8brlm7uf8ozt3"
        // const token = "2v8tmW2mQLXfViA2C6p0Jm1hC0xv/+xhxFY4yoL9rhg=@vyzw.cn.rongnav.com;vyzw.cn.rongcfg.com"

        const { appkey, token } = Config


        // 应用初始化以获取 RongIMLib 实例对象，请务必保证此过程只被执行一次,连接类型推荐使用comet

        RongIMLib.RongIMClient.init(appkey, '', { logLevel: 0 }); //开发者后台 -> 基本信息 获取


        /* 连接状态监听器 */
        RongIMClient.setConnectionStatusListener({
            onChanged: function (status) {
                /* status 标识当前连接状态 */
                console.log('当前连接状态', status);
            }
        });
        /* 消息监听器 */
        RongIMClient.setOnReceiveMessageListener({
            onReceived: function (message) {
                console.log(message);
            }
        });

        var params = {
            //status 标识当前监听到的会话状态
            onChanged: function (status) {
                console.log(status);
            }
        };
        RongIMClient.setConversationStatusListener(params);


        /* 开发者后台获取或 Server API */
        RongIMClient.connect(token, {
            onSuccess: function (userId) {
                console.log('连接成功, 用户 ID 为', userId);
                // 连接已成功, 此时可通过 getConversationList 获取会话列表并展示
            },
            onTokenIncorrect: function () {
                console.log('连接失败, 失败原因: token 无效');
            },
            onError: function (errorCode) {
                console.log('连接失败, 失败原因: ', errorCode);
            }
        });

    </script>
</body>

</html>